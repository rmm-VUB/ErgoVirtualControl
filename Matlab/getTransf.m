function T = getTransf(th1,th2,th3,th4,th5,th6,th7)

global l1 l2 l3 l4

T = [                                                                                                                                                                                       sin(th7)*(cos(th5)*(cos(th4)*sin(th2) - cos(th2)*sin(th3)*sin(th4)) + cos(th2)*cos(th3)*sin(th5)) - cos(th7)*(sin(th6)*(sin(th5)*(cos(th4)*sin(th2) - cos(th2)*sin(th3)*sin(th4)) - cos(th2)*cos(th3)*cos(th5)) - cos(th6)*(sin(th2)*sin(th4) + cos(th2)*cos(th4)*sin(th3))),                                                                                                              - cos(th6)*(sin(th5)*(cos(th4)*sin(th2) - cos(th2)*sin(th3)*sin(th4)) - cos(th2)*cos(th3)*cos(th5)) - sin(th6)*(sin(th2)*sin(th4) + cos(th2)*cos(th4)*sin(th3)),                                                                                                                                                                                       - cos(th7)*(cos(th5)*(cos(th4)*sin(th2) - cos(th2)*sin(th3)*sin(th4)) + cos(th2)*cos(th3)*sin(th5)) - sin(th7)*(sin(th6)*(sin(th5)*(cos(th4)*sin(th2) - cos(th2)*sin(th3)*sin(th4)) - cos(th2)*cos(th3)*cos(th5)) - cos(th6)*(sin(th2)*sin(th4) + cos(th2)*cos(th4)*sin(th3))),                                                                                                                                                                                                                                                                                                          l1*sin(th2) - l2*cos(th2)*cos(th3) - l4*cos(th7)*(cos(th5)*(cos(th4)*sin(th2) - cos(th2)*sin(th3)*sin(th4)) + cos(th2)*cos(th3)*sin(th5)) - l3*cos(th5)*(cos(th4)*sin(th2) - cos(th2)*sin(th3)*sin(th4)) - l4*sin(th7)*(sin(th6)*(sin(th5)*(cos(th4)*sin(th2) - cos(th2)*sin(th3)*sin(th4)) - cos(th2)*cos(th3)*cos(th5)) - cos(th6)*(sin(th2)*sin(th4) + cos(th2)*cos(th4)*sin(th3))) - l3*cos(th2)*cos(th3)*sin(th5);
sin(th7)*(cos(th5)*(sin(th4)*(cos(th1)*cos(th3) - sin(th1)*sin(th2)*sin(th3)) - cos(th2)*cos(th4)*sin(th1)) + sin(th5)*(cos(th1)*sin(th3) + cos(th3)*sin(th1)*sin(th2))) - cos(th7)*(cos(th6)*(cos(th4)*(cos(th1)*cos(th3) - sin(th1)*sin(th2)*sin(th3)) + cos(th2)*sin(th1)*sin(th4)) + sin(th6)*(sin(th5)*(sin(th4)*(cos(th1)*cos(th3) - sin(th1)*sin(th2)*sin(th3)) - cos(th2)*cos(th4)*sin(th1)) - cos(th5)*(cos(th1)*sin(th3) + cos(th3)*sin(th1)*sin(th2)))), sin(th6)*(cos(th4)*(cos(th1)*cos(th3) - sin(th1)*sin(th2)*sin(th3)) + cos(th2)*sin(th1)*sin(th4)) - cos(th6)*(sin(th5)*(sin(th4)*(cos(th1)*cos(th3) - sin(th1)*sin(th2)*sin(th3)) - cos(th2)*cos(th4)*sin(th1)) - cos(th5)*(cos(th1)*sin(th3) + cos(th3)*sin(th1)*sin(th2))), - cos(th7)*(cos(th5)*(sin(th4)*(cos(th1)*cos(th3) - sin(th1)*sin(th2)*sin(th3)) - cos(th2)*cos(th4)*sin(th1)) + sin(th5)*(cos(th1)*sin(th3) + cos(th3)*sin(th1)*sin(th2))) - sin(th7)*(cos(th6)*(cos(th4)*(cos(th1)*cos(th3) - sin(th1)*sin(th2)*sin(th3)) + cos(th2)*sin(th1)*sin(th4)) + sin(th6)*(sin(th5)*(sin(th4)*(cos(th1)*cos(th3) - sin(th1)*sin(th2)*sin(th3)) - cos(th2)*cos(th4)*sin(th1)) - cos(th5)*(cos(th1)*sin(th3) + cos(th3)*sin(th1)*sin(th2)))), - l1*cos(th2)*sin(th1) - l2*cos(th1)*sin(th3) - l3*cos(th5)*(sin(th4)*(cos(th1)*cos(th3) - sin(th1)*sin(th2)*sin(th3)) - cos(th2)*cos(th4)*sin(th1)) - l4*cos(th7)*(cos(th5)*(sin(th4)*(cos(th1)*cos(th3) - sin(th1)*sin(th2)*sin(th3)) - cos(th2)*cos(th4)*sin(th1)) + sin(th5)*(cos(th1)*sin(th3) + cos(th3)*sin(th1)*sin(th2))) - l3*sin(th5)*(cos(th1)*sin(th3) + cos(th3)*sin(th1)*sin(th2)) - l4*sin(th7)*(cos(th6)*(cos(th4)*(cos(th1)*cos(th3) - sin(th1)*sin(th2)*sin(th3)) + cos(th2)*sin(th1)*sin(th4)) + sin(th6)*(sin(th5)*(sin(th4)*(cos(th1)*cos(th3) - sin(th1)*sin(th2)*sin(th3)) - cos(th2)*cos(th4)*sin(th1)) - cos(th5)*(cos(th1)*sin(th3) + cos(th3)*sin(th1)*sin(th2)))) - l2*cos(th3)*sin(th1)*sin(th2);
sin(th7)*(cos(th5)*(sin(th4)*(cos(th3)*sin(th1) + cos(th1)*sin(th2)*sin(th3)) + cos(th1)*cos(th2)*cos(th4)) + sin(th5)*(sin(th1)*sin(th3) - cos(th1)*cos(th3)*sin(th2))) - cos(th7)*(cos(th6)*(cos(th4)*(cos(th3)*sin(th1) + cos(th1)*sin(th2)*sin(th3)) - cos(th1)*cos(th2)*sin(th4)) + sin(th6)*(sin(th5)*(sin(th4)*(cos(th3)*sin(th1) + cos(th1)*sin(th2)*sin(th3)) + cos(th1)*cos(th2)*cos(th4)) - cos(th5)*(sin(th1)*sin(th3) - cos(th1)*cos(th3)*sin(th2)))), sin(th6)*(cos(th4)*(cos(th3)*sin(th1) + cos(th1)*sin(th2)*sin(th3)) - cos(th1)*cos(th2)*sin(th4)) - cos(th6)*(sin(th5)*(sin(th4)*(cos(th3)*sin(th1) + cos(th1)*sin(th2)*sin(th3)) + cos(th1)*cos(th2)*cos(th4)) - cos(th5)*(sin(th1)*sin(th3) - cos(th1)*cos(th3)*sin(th2))), - cos(th7)*(cos(th5)*(sin(th4)*(cos(th3)*sin(th1) + cos(th1)*sin(th2)*sin(th3)) + cos(th1)*cos(th2)*cos(th4)) + sin(th5)*(sin(th1)*sin(th3) - cos(th1)*cos(th3)*sin(th2))) - sin(th7)*(cos(th6)*(cos(th4)*(cos(th3)*sin(th1) + cos(th1)*sin(th2)*sin(th3)) - cos(th1)*cos(th2)*sin(th4)) + sin(th6)*(sin(th5)*(sin(th4)*(cos(th3)*sin(th1) + cos(th1)*sin(th2)*sin(th3)) + cos(th1)*cos(th2)*cos(th4)) - cos(th5)*(sin(th1)*sin(th3) - cos(th1)*cos(th3)*sin(th2)))),   l1*cos(th1)*cos(th2) - l2*sin(th1)*sin(th3) - l3*cos(th5)*(sin(th4)*(cos(th3)*sin(th1) + cos(th1)*sin(th2)*sin(th3)) + cos(th1)*cos(th2)*cos(th4)) - l4*cos(th7)*(cos(th5)*(sin(th4)*(cos(th3)*sin(th1) + cos(th1)*sin(th2)*sin(th3)) + cos(th1)*cos(th2)*cos(th4)) + sin(th5)*(sin(th1)*sin(th3) - cos(th1)*cos(th3)*sin(th2))) - l4*sin(th7)*(cos(th6)*(cos(th4)*(cos(th3)*sin(th1) + cos(th1)*sin(th2)*sin(th3)) - cos(th1)*cos(th2)*sin(th4)) + sin(th6)*(sin(th5)*(sin(th4)*(cos(th3)*sin(th1) + cos(th1)*sin(th2)*sin(th3)) + cos(th1)*cos(th2)*cos(th4)) - cos(th5)*(sin(th1)*sin(th3) - cos(th1)*cos(th3)*sin(th2)))) - l3*sin(th5)*(sin(th1)*sin(th3) - cos(th1)*cos(th3)*sin(th2)) + l2*cos(th1)*cos(th3)*sin(th2);
0, 0, 0, 1];
 

end